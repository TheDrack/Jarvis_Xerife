- name: Architecture & Capability Governance
  env:
    MODE: ${{ inputs.mode }}
    PYTHONPATH: ${{ github.workspace }}
  run: |
    python scripts/architecture_and_cap_governance.py
    STATUS=$?

    echo "Governance exit code: $STATUS"

    # WARNING arquitetural tolerado em govern
    if [ "$MODE" = "govern" ] && [ "$STATUS" -eq 10 ]; then
      echo "⚠️ Arquitetura com warning tolerado"
      exit 0
    fi

    # OK total
    if [ "$STATUS" -eq 0 ]; then
      exit 0
    fi

    # Falha real
    exit 1